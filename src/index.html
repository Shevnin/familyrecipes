<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Семейные рецепты</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      height: 100vh;
      display: flex; justify-content: center; align-items: center; gap: 32px;
      background: #e8e8ed;
    }

    .phone {
      width: 375px; height: 812px;
      border-radius: 40px;
      background: #fff;
      box-shadow: 0 8px 40px rgba(0,0,0,.18), inset 0 0 0 3px #d1d1d6;
      display: flex; flex-direction: column;
      overflow: hidden;
      position: relative;
    }

    .phone-notch {
      width: 150px; height: 28px;
      background: #000; border-radius: 0 0 18px 18px;
      margin: 0 auto;
      position: relative; z-index: 1;
    }

    .phone-screen {
      flex: 1; padding: 16px 20px 24px;
      display: flex; flex-direction: column;
      overflow-y: auto;
    }

    .phone-mom .phone-screen { background: #fafafa; }
    .phone-son .phone-screen { background: #fff; }

    .phone-label {
      text-align: center; font-size: 13px; font-weight: 600;
      color: #666; margin-top: 12px; letter-spacing: 0.5px;
    }

    h1 { font-size: 20px; margin-bottom: 16px; }

    label { display: block; font-weight: 500; margin-bottom: 4px; font-size: 14px; }
    input[type="text"] {
      width: 100%; padding: 10px 12px; font-size: 15px;
      border: 1px solid #ccc; border-radius: 10px; margin-bottom: 12px;
    }
    textarea {
      width: 100%; flex: 1; padding: 12px; font-size: 15px;
      border: 1px solid #ccc; border-radius: 10px; resize: none;
      margin-bottom: 12px; min-height: 160px;
    }
    button {
      padding: 12px 24px; font-size: 15px; font-weight: 600;
      background: #007aff; color: #fff; border: none; border-radius: 12px;
      cursor: pointer; align-self: stretch; text-align: center;
    }
    button:hover { background: #0066d6; }

    .status { margin-top: 10px; color: #2e7d32; font-weight: 500; font-size: 14px; text-align: center; }

    .tabs {
      display: flex; gap: 0; margin-bottom: 16px;
      border-bottom: 2px solid #e0e0e0;
    }
    .tab {
      flex: 1; padding: 10px 0; font-size: 14px; font-weight: 600;
      background: none; color: #999; border: none; border-bottom: 2px solid transparent;
      margin-bottom: -2px; cursor: pointer; border-radius: 0;
    }
    .tab:hover { color: #666; background: none; }
    .tab.active { color: #007aff; border-bottom-color: #007aff; }

    .tab-content { display: none; flex-direction: column; flex: 1; }
    .tab-content.active { display: flex; }

    .sent-list { list-style: none; padding: 0; }
    .sent-item {
      padding: 12px; margin-bottom: 8px;
      background: #f5f5f5; border-radius: 10px;
    }
    .sent-item-title { font-weight: 600; font-size: 14px; margin-bottom: 4px; }
    .sent-item-preview { font-size: 13px; color: #666; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

    .empty { color: #999; font-style: italic; margin-top: 60px; text-align: center; font-size: 15px; }

    .original {
      background: #f5f0e8; border-left: 3px solid #c9a96e;
      padding: 12px; border-radius: 8px; white-space: pre-wrap;
      font-size: 14px; line-height: 1.5; margin-bottom: 16px;
    }
    .original-label, .structured-label {
      font-weight: 600; font-size: 12px; text-transform: uppercase;
      letter-spacing: 0.5px; color: #888; margin-bottom: 6px;
    }

    .structured { font-size: 14px; line-height: 1.5; }
    .structured h3 { font-size: 15px; margin: 12px 0 6px; }
    .structured h3:first-child { margin-top: 0; }
    .structured ul, .structured ol { padding-left: 18px; }
    .structured li { margin-bottom: 3px; }

    @media (max-width: 840px) {
      body { flex-direction: column; height: auto; padding: 16px; gap: 16px; }
      .phone { width: 100%; max-width: 375px; height: 700px; }
    }
  </style>
</head>
<body>

  <!-- Мама -->
  <div>
    <div class="phone phone-mom">
      <div class="phone-notch"></div>
      <div class="phone-screen">
        <h1>Мама</h1>
        <div class="tabs">
          <button class="tab active" data-tab="new">Новый рецепт</button>
          <button class="tab" data-tab="sent">Отправленные</button>
        </div>
        <div class="tab-content active" id="tab-new">
          <label for="title">Название рецепта</label>
          <input type="text" id="title" placeholder="Например: Борщ бабушкин">
          <label for="body">Рецепт</label>
          <textarea id="body" placeholder="Пиши как в мессенджере — свободно, своими словами…"></textarea>
          <button id="send">Отправить сыну</button>
          <div class="status" id="status"></div>
        </div>
        <div class="tab-content" id="tab-sent">
          <ul class="sent-list" id="sent-list"></ul>
          <p class="empty" id="sent-empty">Пока ничего не отправлено</p>
        </div>
      </div>
    </div>
    <div class="phone-label">Передатчик</div>
  </div>

  <!-- Сын -->
  <div>
    <div class="phone phone-son">
      <div class="phone-notch"></div>
      <div class="phone-screen">
        <h1>Сын</h1>
        <div id="son-content">
          <p class="empty">Пока ничего</p>
        </div>
      </div>
    </div>
    <div class="phone-label">Мастер</div>
  </div>

  <script>
    const titleInput = document.getElementById('title');
    const bodyInput = document.getElementById('body');
    const sendBtn = document.getElementById('send');
    const status = document.getElementById('status');
    const sonContent = document.getElementById('son-content');
    const sentList = document.getElementById('sent-list');
    const sentEmpty = document.getElementById('sent-empty');

    // Табы мамы
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.getElementById('tab-' + tab.dataset.tab).classList.add('active');
      });
    });

    const sentRecipes = [];

    // Мок структурированной версии
    const MOCK_STRUCTURED = `
      <h3>Ингредиенты</h3>
      <ul>
        <li>Свёкла — 1 шт.</li>
        <li>Картошка — 3 шт.</li>
        <li>Капуста — 300 г</li>
        <li>Морковь — 1 шт.</li>
        <li>Лук — 1 шт.</li>
        <li>Томатная паста — 1 ст. л.</li>
        <li>Мясо (говядина) — 400 г</li>
        <li>Вода — 2 л</li>
        <li>Соль, перец — по вкусу</li>
      </ul>
      <h3>Шаги</h3>
      <ol>
        <li>Сварить бульон из мяса (~1.5 часа), мясо вытащить.</li>
        <li>Свёклу натереть на крупной тёрке, обжарить с томатной пастой.</li>
        <li>Картошку нарезать кубиками, капусту нашинковать.</li>
        <li>В бульон добавить картошку, варить 10 минут.</li>
        <li>Добавить капусту и свёклу, варить ещё 10 минут.</li>
        <li>Лук и морковь обжарить, добавить в борщ.</li>
        <li>Посолить, поперчить. Дать настояться 20 минут.</li>
      </ol>
    `;

    sendBtn.addEventListener('click', () => {
      const title = titleInput.value.trim();
      const body = bodyInput.value.trim();

      if (!body) return;

      // Сохранить в отправленные
      sentRecipes.push({ title: title || 'Без названия', body });
      sentEmpty.style.display = 'none';
      const li = document.createElement('li');
      li.className = 'sent-item';
      li.innerHTML = `<div class="sent-item-title">${title || 'Без названия'}</div><div class="sent-item-preview">${body}</div>`;
      sentList.prepend(li);

      // Показать статус у мамы
      status.textContent = 'Отправлено!';

      // Показать у сына
      const heading = title ? `<h2 style="margin-bottom:16px">${title}</h2>` : '';

      sonContent.innerHTML = `
        ${heading}
        <div class="original-label">Оригинал от мамы</div>
        <div class="original">${body}</div>
        <div class="structured-label">Структурированная версия</div>
        <div class="structured">${MOCK_STRUCTURED}</div>
      `;
    });
  </script>

</body>
</html>
